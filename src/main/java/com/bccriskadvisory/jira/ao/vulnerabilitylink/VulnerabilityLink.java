/**
 * Copyright (C) 2015 BCC Risk Advisory (info@bccriskadvisory.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.bccriskadvisory.jira.ao.vulnerabilitylink;

import java.time.ZonedDateTime;
import java.util.Optional;

import com.bccriskadvisory.jira.ao.PluginObject;
import com.bccriskadvisory.link.utility.Utilities;

public class VulnerabilityLink implements PluginObject<VulnLinkEntity> {
	
	private int ID;
	private long issueId;
	private String issueKey;
	private String projectKey;
	private int vulnerabilityId;
	private Optional<ZonedDateTime> lastUpdated = Optional.empty();
	
	public VulnerabilityLink() { }
	
	public VulnerabilityLink(final VulnLinkEntity entity) {
		ID = entity.getID();
		issueId = entity.getIssueId();
		issueKey = entity.getIssueKey();
		projectKey = entity.getProjectKey();
		vulnerabilityId = entity.getVulnerabilityId();
		lastUpdated = Utilities.fromDate(entity.getLastUpdated());
	}

	@Override
	public void copyTo(final VulnLinkEntity entity) {
		entity.setIssueId(issueId);
		entity.setIssueKey(issueKey);
		entity.setProjectKey(projectKey);
		entity.setVulnerabilityId(vulnerabilityId);
		
		if (lastUpdated.isPresent()) entity.setLastUpdated(Utilities.toDate(lastUpdated));
	}
	
	@Override
	public int getID() {
		return ID;
	}

	public long getIssueId() {
		return issueId;
	}

	public String getIssueKey() {
		return issueKey;
	}
	
	public String getProjectKey() {
		return projectKey;
	}

	public int getVulnerabilityId() {
		return vulnerabilityId;
	}

	public void setIssueId(long issueId) {
		this.issueId = issueId;
	}

	public void setIssueKey(String issueKey) {
		this.issueKey = issueKey;
	}
	
	public void setProjectKey(String projectKey) {
		this.projectKey = projectKey;
	}

	public void setVulnerabilityId(int vulnerabilityId) {
		this.vulnerabilityId = vulnerabilityId;
	}

	public Optional<ZonedDateTime> getLastUpdated() {
		return lastUpdated;
	}

	public void setLastUpdated(ZonedDateTime lastUpdated) {
		this.lastUpdated = Optional.ofNullable(lastUpdated);
	}
}